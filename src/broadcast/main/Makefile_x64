################################################################################
### CUSTOMIZE BELOW HERE #######################################################

WEBRTC_LIBS = /workspace/MagicAI/src/webrtc/build/
WEBRTC_PATH = /workspace/webrtc/src/
SSL_ROOT = /workspace/MagicAI/src/openssl/buildx64

CC	= gcc
CXX     = g++
TARGET=runWebrtc # define the name of the executable
SOURCES=$(wildcard *.cpp ../src/*.cpp ../src/x64/*.cpp ../../libuv/src/*.cpp ../../libuv/src/unix/*.cpp ../../base/src/*.cpp  ../../net/src/*.cpp ../../http/src/*.cpp ../../http_parser/*.cpp ../../facedetec/src/configuration.cpp ../../signal/src/*.cpp )

CXXFLAGS   := -g -fno-rtti -std=c++11 -Wno-uninitialized


CPPFLAGS   := -I../../signal/include -I../../facedetec/include/ -I${SSL_ROOT}/include  -I../include  -I../../http/include/ -I../../base/include/ -I../../net/include/ -I../../libuv/include -I../../libuv/src -I../../../build/ -I../../http_parser/ -I../webrtc/include   -I../include/x64  -DWEBRTC_POSIX -I${WEBRTC_PATH}  -I${WEBRTC_PATH}/third_party/abseil-cpp -DHTTPSSL
#LDFLAGS   := -L/export/views/video/ffmpeg/Obj/

LDLIBS    := -lpthread -lm -ldl -lz -lbz2 -L/workspace/MagicAI/src/openssl/buildx64/lib -ljpeg -lssl -lcrypto

SLIBS     := ${WEBRTC_LIBS}/libjingle_peerconnection_so.a ${WEBRTC_LIBS}/third_party/usrsctp/libusrsctp.a  ${WEBRTC_LIBS}/third_party/libevent/libevent.a  ${WEBRTC_LIBS}/third_party/libsrtp/libsrtp.a   ${WEBRTC_LIBS}/third_party/libyuv/libyuv/libyuv.a ${WEBRTC_LIBS}/third_party/pffft/libpffft.a  ${WEBRTC_LIBS}/third_party/rnnoise/librnnoise.a \
${WEBRTC_LIBS}/third_party/abseil-cpp/abseil-cpp/absl/strings/libabsl_absl_strings.a \
${WEBRTC_LIBS}/third_party/abseil-cpp/abseil-cpp/absl/types/libabsl_absl_bad_variant_access.a \
${WEBRTC_LIBS}/third_party/abseil-cpp/abseil-cpp/absl/types/libabsl_absl_bad_optional_access.a \
${WEBRTC_LIBS}/third_party/abseil-cpp/abseil-cpp/absl/base/libabsl_absl_throw_delegate.a




################################################################################
### DO NOT EDIT THE FOLLOWING LINES ############################################


# define list of objects
OBJSC=$(SOURCES:.cpp=.o)
OBJS=$(OBJSC:.cpp=.o)

# the target is obtained linking all .o files
all: $(SOURCES) $(TARGET)

$(TARGET): $(OBJS)
	$(CXX) $(CXXFLAGS) $(CPPFLAGS) $(OBJS) $(SLIBS) $(LDFLAGS) $(LDLIBS) -o $(TARGET)

purge: clean
	rm -f $(TARGET)

clean:
	rm -f  $(OBJS)

################################################################################
################################################################################
