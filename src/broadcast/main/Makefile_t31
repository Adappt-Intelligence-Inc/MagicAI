T31SDK =/workspace/adappt/T31/ISVP-T31-1.1.6-20221229/software/Ingenic-SDK-T31-1.1.6-20221229/sdk/5.4.0

INSTALLPATH=/workspace/adappt/T31/ISVP-T31-1.1.6-20221229/software/Ingenic-SDK-T31-1.1.6-20221229/resource/toolchain/gcc_540/mips-gcc540-glibc222-64bit-r3.3.0
#export INSTALLPATH="/workspace/adappt/T31/ISVP-T31-1.1.6-20221229/software/Ingenic-SDK-T31-1.1.6-20221229/resource/toolchain/gcc_472/mips-gcc472-glibc216-64bit"
TOOLCHAIN=${INSTALLPATH}/bin
CROSS_COMPILE=${TOOLCHAIN}/mips-linux-gnu-
CC=${CROSS_COMPILE}gcc
CXX=${CROSS_COMPILE}g++
LD=${CROSS_COMPILE}ld
AR=${CROSS_COMPILE}ar
STRIP=${CROSS_COMPILE}strip
NM=${CROSS_COMPILE}nm
RANLIB=${CROSS_COMPILE}ranlib
# CFLAGS="-static -O2  -march=mips32r2 -uClibc++  -std=c++11 -I${INSTALLPATH}/include -I${INSTALLPATH}/_install/include/"
# export CPPFLAGS="-static -O2  -uClibc++ -std=c++11 -I${INSTALLPATH}/include -I${INSTALLPATH}/_install/include/ -I${INSTALLPATH}/_install/include/ncursesw/"
# export LDFLAGS="-static -uClibc++ -L${INSTALLPATH}/lib -L${INSTALLPATH}/_install/lib/"



#FFMPEG_ROOT = /workspace/MagicAI/3rdparty/installt31
WEBRTC_PATH = /workspace/webrtc/src/
SSL_ROOT = /workspace/MagicAI/src/openssl/buildt31



TARGET=runWebrtc # define the name of the executable
SOURCES=$(wildcard *.cpp ../src/*.cpp ../src/t31/*.cpp ../../base/src/*.cpp ../../base/token/*.cpp ../../net/src/*.cpp ../../http/src/*.cpp ../../http_parser/*.cpp ../../facedetec/src/*.cpp ../../facedetec/src/t31/*.cpp ../../signal/src/*.cpp)

CXXFLAGS   := -Os -fdata-sections -ffunction-sections -fno-rtti -std=c++11 -Wno-uninitialized -DNDEBUG -fpermissive


CPPFLAGS   := -I../../signal/include -I../../facedetec/include/  -I../../facedetec/include/t31/    -I../include -I../../base/token/ -I../../http/include/ -I../../base/include/ -I../../net/include/ -I../../libuv/include -I../../libuv/src -I../../../build/ -I../../http_parser/ -I../webrtc/include  -DWEBRTC_POSIX  -I${WEBRTC_PATH}  -I${SSL_ROOT}/include  -I../include/t31 -I${WEBRTC_PATH}/third_party/abseil-cpp -DHTTPSSL -I../../facedetec/xailient-sdk/include/ -I${T31SDK}/include -I${T31SDK}/samples/libimp-sample/




LDFLAGS  += -L../../facedetec/xailient-sdk/lib  -L${T31SDK}/lib -L${INSTALLPATH}/mips-linux-gnu/lib -lm  -muclibc 

LDLIBS   +=  -lxailient-fi -L/workspace/MagicAI/src/webrtc/t31 -ljingle_peerconnection_so -lrt -lm -ldl -lpthread -latomic

SLIBS    += ../../libuv/build/libuv_a.a ${SSL_ROOT}/lib/libssl.a ${SSL_ROOT}/lib/libcrypto.a ${T31SDK}/lib/uclibc/libalog.a ${T31SDK}/lib/uclibc/libimp.a



################################################################################
### DO NOT EDIT THE FOLLOWING LINES ############################################


# define list of objects
OBJSC=$(SOURCES:.cpp=.o)
OBJS=$(OBJSC:.cpp=.o)

# the target is obtained linking all .o files
all: $(SOURCES) $(TARGET)

$(TARGET): $(OBJS)
		$(CXX) $(CXXFLAGS) $(CPPFLAGS) $(LDFLAGS) $(OBJS) $(SLIBS) $(LDLIBS) -o $(TARGET)

purge: clean
	rm -f $(TARGET)

clean:
	rm -f  $(OBJS)

strip: 
	${STRIP}  $(TARGET)



################################################################################
################################################################################
